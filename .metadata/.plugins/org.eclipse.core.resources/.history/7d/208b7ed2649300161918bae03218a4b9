ebay.controller('profileController', function ($scope, $http, $window,$state) {
	
	$scope.category = "Electronics";
	
	$scope.basic = function()
	{
		$http({
			method: "POST",
			url: "/getPurchaseHistory",
		}).success(function (data) {
			if(data.statusCode == 401)
			{
				$window.alert('You need to login first. To view this page');
				$window.location = "/login";
			}
			else if(data.statusCode == 200)
			{
				$scope.purchases = data.data;
			}
			else
			{
				$window.alert('Something went wrong.Please try again.');
			}
		}).error(function (error) {
			$window.alert('Something went wrong.Please try again.');
		});

		$http({
			method: "POST",
			url: "/getSellingHistory",
		}).success(function (data) {
			if(data.statusCode == 401)
			{
				$window.alert('You need to login first. To view this page');
				$window.location = "/login";
			}
			else if(data.statusCode == 200)
			{
				$scope.selling = data.data;
			}
			else
			{
				$window.alert('Something went wrong.Please try again.');
			}
		}).error(function (error) {
			$window.alert('Something went wrong.Please try again.');
		});
	};
	$scope.basic();

	$scope.removeItem = function(item_id)
	{
		$http({
			method: "POST",
			url: "/removeItem",
			data:{
				"item_id":item_id
			}
		}).success(function (data) {
			if(data.statusCode == 401)
			{
				$window.alert('You need to login first. To view this page');
				$window.location = "/login";
			}
			else if(data.statusCode == 200)
			{
				$scope.basic();
			}
			else
			{
				$window.alert('Something went wrong.Please try again.');
			}
		}).error(function (error) {
			$window.alert('Something went wrong.Please try again.');
		});
	};
	
	$scope.addItem = function () 
	{
		$http({
			method: "POST",
			url: "/removeItem",
			data:{
				"item_id":item_id
			}
		}).success(function (data) {
			if(data.statusCode == 401)
			{
				$window.alert('You need to login first. To view this page');
				$window.location = "/login";
			}
			else if(data.statusCode == 200)
			{
				$scope.basic();
			}
			else
			{
				$window.alert('Something went wrong.Please try again.');
			}
		}).error(function (error) {
			$window.alert('Something went wrong.Please try again.');
		});
	};
});