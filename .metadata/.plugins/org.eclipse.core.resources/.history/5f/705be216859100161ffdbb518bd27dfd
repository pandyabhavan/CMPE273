ebay.controller('searchController', function ($scope, $http, $window,$state) {
	
	$scope.filteredTodos = []
	  ,$scope.currentPage = 1
	  ,$scope.numPerPage = 3
	  ,$scope.maxSize = 3;

	  $scope.makeTodos = function() {
	    $scope.todos = [];
	    for (i=1;i<=1000;i++) {
	      $scope.todos.push({ text:"todo "+i, done:false});
	    }
	  };
	  $scope.makeTodos(); 

	  $scope.$watch("currentPage + numPerPage", function() {
	    var begin = (($scope.currentPage - 1) * $scope.numPerPage)
	    , end = begin + $scope.numPerPage;

	    $scope.filteredTodos = $scope.todos.slice(begin, end);
	  });

	$http({
        method: "POST",
        url: "/getSearchSession",
    }).success(function (data) {
        if(data.statusCode == 401)
        {
        	$window.location = "/";
        }
        else if(data.statusCode == 200)
        {
        	$scope.items = data.data;
        }
        else
    	{
        	$window.location = "/";
    	}
    	}).error(function (error) {
    		$window.location = "/";
    	});	
	
	$scope.product = function(index)
	{
		$window.alert('Selected is '+index);
	}
});